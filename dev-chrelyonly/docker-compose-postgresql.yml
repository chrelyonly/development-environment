
services:
  postgresql-public1:
    mem_limit: 1g
    image: docker.1ms.run/library/postgres:15.15
    container_name: postgresql-public1
    networks:
      - my-network
    ports:
      - "55432:5432"
    environment:
      POSTGRES_USER: postgresql-public1
      POSTGRES_PASSWORD: postgresql-public1
    volumes:
      - /www/dk_project/dk_app/chrelyonly-postgresql/app/data1:/var/lib/postgresql/data


  postgresql-public2:
    mem_limit: 1g
    image: docker.1ms.run/library/postgres:15.15
    container_name: postgresql-public2
    networks:
      - my-network
    ports:
      - "55433:5432"
    environment:
      POSTGRES_USER: postgresql-public2
      POSTGRES_PASSWORD: postgresql-public2
    volumes:
      - /www/dk_project/dk_app/chrelyonly-postgresql/app/data2:/var/lib/postgresql/data



networks:
  my-network:  # 定义自定义网络
    name: my-network  # 自定义网络名称，可选
    driver: bridge    # 使用桥接网络，默认 Docker 网络模式
    ipam:             # IP 地址管理（IP Address Management）
      driver: default # 默认 IPAM 驱动
      config:         # 子网配置，可配置多个
        - subnet: 172.20.0.0/16  # 自定义子网段
          gateway: 172.20.0.1    # 子网默认网关
          aux_addresses:         # 预留 IP 地址
            host1: 172.20.0.2
            host2: 172.20.0.3